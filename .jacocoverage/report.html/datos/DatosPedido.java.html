<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>DatosPedido.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;DeliveryApp&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">datos</a> &gt; <span class="el_source">DatosPedido.java</span></div><h1>DatosPedido.java</h1><pre class="source lang-java linenums">package datos;



import conexion.Conectar;
import java.sql.Connection;
import java.sql.Date;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import subPaneles.Eliminar_Pedido;

<span class="nc" id="L13">public class DatosPedido {</span>

    public void guardarPedido(String dir_A_retirarP,String dir_A_dejar,String fecha_retiro,String fecha_entrega,String hora_retiro,String hora_Entrega, String Estado, float precio,int cuit_cadete,int id_cliente ) throws SQLException {

<span class="nc" id="L17">        Conectar con = new Conectar();</span>
<span class="nc" id="L18">        Connection miConexion = con.conexion();</span>

<span class="nc" id="L20">        String SQL = &quot;INSERT INTO pedido (dir_retirar_pedido,dir_dejar_pedido,fecha_retiro,fecha_entrega,hora_retiro,hora_entrega,estado,precio,cuit_cadete,id_cliente) VALUES ('&quot; + dir_A_retirarP</span>
                + &quot;', '&quot; + dir_A_dejar + &quot;','&quot; + fecha_retiro + &quot;', '&quot; + fecha_entrega + &quot;', '&quot; + hora_retiro+ &quot;', '&quot; +hora_Entrega + &quot;','&quot;+Estado+&quot;', '&quot; + precio + &quot;', '&quot; + cuit_cadete + &quot;','&quot; + id_cliente + &quot;')&quot;;

<span class="nc" id="L23">        Statement insertar = miConexion.createStatement();</span>

<span class="nc" id="L25">        insertar.executeUpdate(SQL);</span>
<span class="nc" id="L26">    }</span>

    public ResultSet ultimoPedido() throws SQLException {
<span class="nc" id="L29">        Conectar con = new Conectar();</span>
<span class="nc" id="L30">        Connection miConexion = con.conexion();</span>

<span class="nc" id="L32">        String SQL = &quot;Select * from pedido order by id_pedido desc limit 1&quot;;</span>

<span class="nc" id="L34">        Statement miEstatement = miConexion.createStatement();</span>

<span class="nc" id="L36">        ResultSet rs = miEstatement.executeQuery(SQL);</span>

<span class="nc" id="L38">        return rs;</span>
    }
/*
    public void insertarDetallePedido(int id_comida, int id_pedido, int cantidad, float precio) throws SQLException {

        Conectar con = new Conectar();
        Connection miConexion = con.conexion();

        String SQL = &quot;INSERT INTO detallepedido (id_comida, id_pedido, cantidad, precio, fecha, estado) VALUES (&quot; + id_comida + &quot;, &quot; + id_pedido + &quot;,&quot; + cantidad + &quot;,&quot; + precio + &quot;, NOW(), 1)&quot;;

        Statement insertar = miConexion.createStatement();

        insertar.executeUpdate(SQL);

    }
*/
    public ResultSet obtenerPedidos() throws SQLException {

<span class="nc" id="L56">        Conectar con = new Conectar();</span>
<span class="nc" id="L57">        Connection miConexion = con.conexion();</span>

<span class="nc" id="L59">        String SQL = &quot;SELECT * FROM pedido WHERE estado = 'Activo' or estado = 'Enviado'&quot;;</span>

<span class="nc" id="L61">        Statement miEstatement = miConexion.createStatement();</span>

<span class="nc" id="L63">        ResultSet rs = miEstatement.executeQuery(SQL);</span>

<span class="nc" id="L65">        return rs;</span>

    }

      public ResultSet obtenerPedidosPorId(int id) throws SQLException {

<span class="nc" id="L71">        Conectar con = new Conectar();</span>
<span class="nc" id="L72">        Connection miConexion = con.conexion();</span>

<span class="nc" id="L74">        String SQL = &quot;SELECT * FROM pedido WHERE id_pedido =&quot;+id+&quot; AND estado = 'Activo' or estado='Enviado' &quot;;</span>

<span class="nc" id="L76">        Statement miEstatement = miConexion.createStatement();</span>

<span class="nc" id="L78">        ResultSet rs = miEstatement.executeQuery(SQL);</span>

<span class="nc" id="L80">        return rs;</span>

    }
      
      
      //metodo viejo
    public ResultSet obtenerPedidosDelDia() throws SQLException {

<span class="nc" id="L88">        Conectar con = new Conectar();</span>
<span class="nc" id="L89">        Connection miConexion = con.conexion();</span>

<span class="nc" id="L91">        java.util.Date utilDate = new java.util.Date(); //fecha actual</span>
<span class="nc" id="L92">        long lnMilisegundos = utilDate.getTime();</span>
<span class="nc" id="L93">        java.sql.Date sqlDate = new java.sql.Date(lnMilisegundos);</span>
        
<span class="nc" id="L95">        String SQL = &quot;SELECT * FROM pedidos WHERE fecha_hora LIKE '&quot;+sqlDate+&quot;%'&quot;;</span>

<span class="nc" id="L97">        Statement miEstatement = miConexion.createStatement();</span>

<span class="nc" id="L99">        ResultSet rs = miEstatement.executeQuery(SQL);</span>

<span class="nc" id="L101">        return rs;</span>
    }
    public ResultSet obtenerPedidosPorId(String id) throws SQLException {

<span class="nc" id="L105">        Conectar con = new Conectar();</span>
<span class="nc" id="L106">        Connection miConexion = con.conexion();</span>

<span class="nc" id="L108">        String SQL = &quot;SELECT * FROM pedido WHERE id_pedido =&quot;+id+&quot; AND estado = 'Activo'&quot;;</span>

<span class="nc" id="L110">        Statement miEstatement = miConexion.createStatement();</span>

<span class="nc" id="L112">        ResultSet rs = miEstatement.executeQuery(SQL);</span>

<span class="nc" id="L114">        return rs;</span>

    }
    //
    
     public ResultSet obtenerUltimosPedidos() throws SQLException {

<span class="nc" id="L121">        Conectar con = new Conectar();</span>
<span class="nc" id="L122">        Connection miConexion = con.conexion();</span>

<span class="nc" id="L124">        String SQL = &quot;SELECT * FROM pedido ORDER BY id_pedido DESC LIMIT 15&quot;;</span>

<span class="nc" id="L126">        Statement miEstatement = miConexion.createStatement();</span>

<span class="nc" id="L128">        ResultSet rs = miEstatement.executeQuery(SQL);</span>

<span class="nc" id="L130">        return rs;</span>

    }
     
       public ResultSet obtenerDetallesPorIdPedido(int id_pedido) throws SQLException {

<span class="nc" id="L136">        Conectar con = new Conectar();</span>
<span class="nc" id="L137">        Connection miConexion = con.conexion();</span>

<span class="nc" id="L139">        String SQL = &quot;SELECT * FROM pedido WHERE id_pedido =&quot;+id_pedido;</span>

<span class="nc" id="L141">        Statement miEstatement = miConexion.createStatement();</span>

<span class="nc" id="L143">        ResultSet rs = miEstatement.executeQuery(SQL);</span>

<span class="nc" id="L145">        return rs;</span>

    }

    public double obtenerMonto(int id_pedido) throws SQLException {

<span class="nc" id="L151">        Conectar con = new Conectar();</span>
<span class="nc" id="L152">        Connection miConexion = con.conexion();</span>

<span class="nc" id="L154">        String SQL = &quot;SELECT * FROM pedido WHERE id_pedido = &quot; + id_pedido +&quot; AND estado = 'Activo'&quot;;</span>

<span class="nc" id="L156">        Statement miEstatement = miConexion.createStatement();</span>

<span class="nc" id="L158">        ResultSet rs = miEstatement.executeQuery(SQL);</span>

<span class="nc" id="L160">        double monto = 0;</span>
<span class="nc bnc" id="L161" title="All 2 branches missed.">        while (rs.next()) {</span>

<span class="nc" id="L163">            monto = monto + rs.getDouble(&quot;precio&quot;);</span>
        }
<span class="nc" id="L165">        return monto;</span>
    }

    public void ActualizarEstadoPedido(int id_pedido, String estadoPedido) throws SQLException {

<span class="nc" id="L170">        Conectar con = new Conectar();</span>
<span class="nc" id="L171">        Connection miConexion = con.conexion();</span>

<span class="nc" id="L173">        String SQL = &quot;UPDATE pedido SET estado = '&quot; + estadoPedido + &quot;' WHERE id_pedido = &quot; + id_pedido;</span>

<span class="nc" id="L175">        Statement modificar = miConexion.createStatement();</span>

<span class="nc" id="L177">        modificar.executeUpdate(SQL);</span>
<span class="nc" id="L178">    }</span>
    
    public void ActualizarEstadoPedidoCancelado(int id_pedido) throws SQLException {

<span class="nc" id="L182">        Conectar con = new Conectar();</span>
<span class="nc" id="L183">        Connection miConexion = con.conexion();</span>

<span class="nc" id="L185">        String SQL = &quot;UPDATE pedido SET estado = 'Cancelado' WHERE id_pedido = &quot; + id_pedido;</span>

<span class="nc" id="L187">        Statement modificar = miConexion.createStatement();</span>

<span class="nc" id="L189">        modificar.executeUpdate(SQL);</span>
<span class="nc" id="L190">    }</span>

    //no la uso todavia, despues ver que se puede hacer con esto!!!!
    public ResultSet obtenerTarifaEnvio(int id_pedido) throws SQLException {

<span class="nc" id="L195">        Conectar con = new Conectar();</span>
<span class="nc" id="L196">        Connection miConexion = con.conexion();</span>

<span class="nc" id="L198">        String SQL = &quot;SELECT tarifaE FROM zonas z join clientes c join pedidos p WHERE p.id_pedido =&quot;+id_pedido;</span>

<span class="nc" id="L200">        Statement miEstatement = miConexion.createStatement();</span>

<span class="nc" id="L202">        ResultSet rs = miEstatement.executeQuery(SQL);</span>

<span class="nc" id="L204">        return rs;</span>
    }
    
    // VOY A USAR ESTE METODO PARA DECIR QUE EL PEDIDO ESTA ENTREGADO
   public void eliminarDetallesPedido(Eliminar_Pedido modelo)throws SQLException {
<span class="nc" id="L209">       Conectar con = new Conectar();</span>
<span class="nc" id="L210">        Connection miConexion = con.conexion();</span>
<span class="nc" id="L211">        int id_pedido=Integer.parseInt(modelo.Codigo_EP.getText());</span>
<span class="nc" id="L212">        String estado = modelo.ingresar_Estado_P2.getSelectedItem().toString();</span>
<span class="nc" id="L213">        String SQL = &quot;UPDATE pedido SET estado = '&quot;+estado+&quot;' WHERE id_pedido = &quot; + id_pedido;</span>

<span class="nc" id="L215">        Statement modificar = miConexion.createStatement();</span>

<span class="nc" id="L217">        modificar.executeUpdate(SQL);</span>
<span class="nc" id="L218">   }</span>
   
/* este metodo solo cuenta como uno cada comida vendida en el pedido (No uso)
   public int obtenerCantidadVendida(int idComida) throws SQLException{
       Conectar con = new Conectar();
        Connection miConexion = con.conexion();

        String SQL = &quot;SELECT COUNT(*) as total FROM detallepedido WHERE id_comida =&quot;+idComida;

        Statement miEstatement = miConexion.createStatement();

        ResultSet rs = miEstatement.executeQuery(SQL);
        rs.first();
        return rs.getInt(&quot;total&quot;);
   }*/
   
   //el modulo que sigue no los uso. !! ! ! !! ! !
   public ResultSet obtenerPeriodoParaComidasMasVendidas(String desde, String hasta) throws SQLException{
<span class="nc" id="L236">        Conectar con = new Conectar();</span>
<span class="nc" id="L237">        Connection miConexion = con.conexion();</span>
         
<span class="nc" id="L239">        String SQL = &quot;SELECT * FROM detallepedido WHERE fecha &gt;= '&quot;+desde+&quot;' AND fecha &lt;= '&quot;+hasta+&quot;' AND estado = 1&quot;;</span>

<span class="nc" id="L241">        Statement miEstatement = miConexion.createStatement();</span>

<span class="nc" id="L243">        ResultSet rs = miEstatement.executeQuery(SQL);</span>
<span class="nc" id="L244">        return rs;</span>
   }
   
   //OBTENGO LOS PEDIDOS QUE SE HICIERON EN UN PERIODO X DE TIEMPO....
   
   public ResultSet obtenerPeriodoPedidos(String desde, String hasta) throws SQLException{
<span class="nc" id="L250">        Conectar con = new Conectar();</span>
<span class="nc" id="L251">        Connection miConexion = con.conexion();</span>
         
<span class="nc" id="L253">        String SQL = &quot;SELECT * FROM pedido WHERE fecha_entrega &gt;= '&quot;+desde+&quot;' AND fecha_entrega &lt;= '&quot;+hasta+&quot;' AND estado = 'Entregado' or estado ='Cancelado'&quot;;</span>

<span class="nc" id="L255">        Statement miEstatement = miConexion.createStatement();</span>

<span class="nc" id="L257">        ResultSet rs = miEstatement.executeQuery(SQL);</span>
<span class="nc" id="L258">        return rs;</span>
   }

    public void guardarPedido(String diaAR, String dir_AD, java.util.Date fecha_A_rP, java.util.Date fecha_A_dP, String text, String text0, String trim, Float valueOf, int parseInt, int cliente_ingreso) {
<span class="nc" id="L262">        throw new UnsupportedOperationException(&quot;Not supported yet.&quot;); //To change body of generated methods, choose Tools | Templates.</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>